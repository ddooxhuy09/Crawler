import{q as ce}from"./chunk-c587a301.js";import{C as pe,a as ue,b as we,c as Oe,__tla as Pe}from"./chunk-72d8b289.js";import{c as Me,l as He,__tla as Ge}from"./chunk-72196173.js";import{p as ke,l as A,P as Ue,a as G,S as ge,b as k,c as Ae,d as ve,e as Ne,f as Ee,g as he,h as me,i as De,j as Te,k as Ve,m as Ie,n as xe,L as ye}from"./chunk-15a82b54.js";import{s as u}from"./chunk-28200a5e.js";Promise.all([(()=>{try{return Pe}catch{}})(),(()=>{try{return Ge}catch{}})()]).then(async()=>{const Re=async()=>{let w=window.location.href;U(w);function m(){w=window.location.href,U(w)}window.addEventListener("popstate",m),window.addEventListener("hashchange",m),setInterval(()=>{window.location.href!==w&&m()},1e3)},U=async w=>{const m=ke(w);if(m){const v=document.querySelector("#heybutton-iframes > iframe");v&&(v.src=chrome.runtime.getURL(`popup.html#/go-to-pinner?username=${m}`))}else{await A.set(Ue,JSON.stringify([]));const v=document.querySelector("#heybutton-iframes > iframe");v&&(v.src=chrome.runtime.getURL("popup.html"))}};(function(w,m){var z,Z,q,K,j,X,W,$,J;try{window.YTUONG_DATA=JSON.parse(document.querySelector("#__PWS_DATA__").innerHTML||"{}"),chrome.storage.local.set({PINTEREST_DATA:window.YTUONG_DATA})}catch{window.YTUONG_DATA={}}try{window.YTUONG_APP_VERSION=((z=window.YTUONG_DATA)==null?void 0:z.appVersion)||"4675a56",chrome.storage.local.set({YTUONG_APP_VERSION:window.YTUONG_APP_VERSION})}catch{window.YTUONG_APP_VERSION="4675a56",chrome.storage.local.set({YTUONG_APP_VERSION:window.YTUONG_APP_VERSION})}try{window.YTUONG_HANDLER_ID=((Z=window.YTUONG_DATA)==null?void 0:Z.initialHandlerId)||"www/homefeed.js",chrome.storage.local.set({YTUONG_HANDLER_ID:window.YTUONG_HANDLER_ID})}catch{window.YTUONG_HANDLER_ID="www/homefeed.js",chrome.storage.local.set({YTUONG_HANDLER_ID:window.YTUONG_HANDLER_ID})}try{window.YTUONG_EXPERIMENT_HASH=((K=(q=window.YTUONG_DATA)==null?void 0:q.context)==null?void 0:K.experiment_hash)||"4d611390f50f8506a1f34c28fb0a4fb4d03b7b054bcbeb1d3373b61e09424d6ae8b87dad10800c09108fc0e6955259b53b270be72aa3022be9ac93b7b1bd5d99",chrome.storage.local.set({YTUONG_EXPERIMENT_HASH:window.YTUONG_EXPERIMENT_HASH})}catch{window.YTUONG_EXPERIMENT_HASH="4d611390f50f8506a1f34c28fb0a4fb4d03b7b054bcbeb1d3373b61e09424d6ae8b87dad10800c09108fc0e6955259b53b270be72aa3022be9ac93b7b1bd5d99",chrome.storage.local.set({YTUONG_EXPERIMENT_HASH:window.YTUONG_EXPERIMENT_HASH})}try{window.YTUONG_PATH=((X=(j=window.YTUONG_DATA)==null?void 0:j.context)==null?void 0:X.path)||"/homefeed/",chrome.storage.local.set({YTUONG_PATH:window.YTUONG_PATH})}catch{window.YTUONG_PATH="/homefeed/",chrome.storage.local.set({YTUONG_PATH:window.YTUONG_PATH})}try{window.YTUONG_ORIGIN=(($=(W=window.YTUONG_DATA)==null?void 0:W.context)==null?void 0:$.origin)||"https://www.pinterest.com",chrome.storage.local.set({YTUONG_ORIGIN:window.YTUONG_ORIGIN})}catch{window.YTUONG_ORIGIN="https://www.pinterest.com",chrome.storage.local.set({YTUONG_ORIGIN:window.YTUONG_ORIGIN})}window.CARD_DIV_LOADING='<div class="pinterest-ytuong"><div class="absolute left-0 top-1/4 w-full"><div class=" p-4 mx-auto"><div class="flex space-x-4 animate-pulse"><div class="flex-1 space-y-4 py-1"><div class="h-4 bg-white rounded-md"></div><div class="h-4 bg-white rounded-md"></div><div class="h-4 bg-white rounded-md "></div><div class="h-4 bg-white rounded-md "></div></div></div></div></div></div>',window.CARD_DIV_EMPTY='<div class="pinterest-ytuong"></div>',window.YTUONG_BRAND_LINK='<a href="https://ytuong.me/" target="_blank" class="absolute border-2 border-dashed text-sm mx-4 text-right rounded-md border-gray-500 bg-opacity-50 bg-white top-3 right-0 -translate-y-1/2 transform py-0.5 px-4 font-semibold text-teal-700">YTUONG.ME</a>',window.CARD_PIN_TRADEMARK='<div class="text-gray-800 flex items-center px-1 py-0.5 space-x-1 font-medium rounded-md">  <div class="ytuong-icon ytuong-icon__danger">  <div class="ytuong-tooltip ytuong-tooltip__dang text-xs">  SortPin.com    </div>  <a class="flex items-center __PADDING_CARD__ __CARD_SIZE_TEXTS__ rounded-md bg-pink-600 text-white group-hover:bg-pink-800" href="https://sortpin.com/" target="_blank">  SortPin.com  </a>  </div>  </div>',window.CARD_PIN_SAVES='<div class="text-gray-800 flex items-center px-1 py-0.5 space-x-1 text-sm font-medium rounded-md">    <div class="ytuong-icon ytuong-icon__danger">    <div class="ytuong-tooltip ytuong-tooltip__dang text-xs">      Saves    </div>    <span class="bg-white flex items-center __PADDING_CARD__ rounded-md">      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="__CARD_SIZE_ICONS__ text-red-600 hover:text-red-700">      <path d="M9.653 16.915l-.005-.003-.019-.01a20.759 20.759 0 01-1.162-.682 22.045 22.045 0 01-2.582-1.9C4.045 12.733 2 10.352 2 7.5a4.5 4.5 0 018-2.828A4.5 4.5 0 0118 7.5c0 2.852-2.044 5.233-3.885 6.82a22.049 22.049 0 01-3.744 2.582l-.019.01-.005.003h-.002a.739.739 0 01-.69.001l-.002-.001z" />      </svg>  </span>  </div>  __SAVES__</div>',window.CARD_PIN_LIKES='<div class="text-gray-800 flex items-center px-1 py-0.5 space-x-1 text-sm font-medium rounded-md">    <div class="ytuong-icon ytuong-icon__danger">    <div class="ytuong-tooltip ytuong-tooltip__dang text-xs">      Likes    </div>    <span class="bg-white flex items-center __PADDING_CARD__ rounded-md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="__CARD_SIZE_ICONS__ text-blue-600 hover:text-blue-700">  <path d="M1 8.25a1.25 1.25 0 112.5 0v7.5a1.25 1.25 0 11-2.5 0v-7.5zM11 3V1.7c0-.268.14-.526.395-.607A2 2 0 0114 3c0 .995-.182 1.948-.514 2.826-.204.54.166 1.174.744 1.174h2.52c1.243 0 2.261 1.01 2.146 2.247a23.864 23.864 0 01-1.341 5.974C17.153 16.323 16.072 17 14.9 17h-3.192a3 3 0 01-1.341-.317l-2.734-1.366A3 3 0 006.292 15H5V8h.963c.685 0 1.258-.483 1.612-1.068a4.011 4.011 0 012.166-1.73c.432-.143.853-.386 1.011-.814.16-.432.248-.9.248-1.388z" />  </svg>  </span>  </div>    __LIKES__</div>',window.CARD_PIN_COMMENTS='<div class="text-gray-800 flex items-center px-1 py-0.5 space-x-1 text-sm font-medium rounded-md">    <div class="ytuong-icon ytuong-icon__danger">    <div class="ytuong-tooltip ytuong-tooltip__dang text-xs">      Comments    </div>  <span class="bg-white flex items-center __PADDING_CARD__ rounded-md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="__CARD_SIZE_ICONS__">  <path fill-rule="evenodd" d="M10 2c-2.236 0-4.43.18-6.57.524C1.993 2.755 1 4.014 1 5.426v5.148c0 1.413.993 2.67 2.43 2.902.848.137 1.705.248 2.57.331v3.443a.75.75 0 001.28.53l3.58-3.579a.78.78 0 01.527-.224 41.202 41.202 0 005.183-.5c1.437-.232 2.43-1.49 2.43-2.903V5.426c0-1.413-.993-2.67-2.43-2.902A41.289 41.289 0 0010 2zm0 7a1 1 0 100-2 1 1 0 000 2zM8 8a1 1 0 11-2 0 1 1 0 012 0zm5 1a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />  </svg>  </span>  </div>    __COMMENTS__</div>',window.CARD_PIN_REACTIONS='<div class="text-gray-800 flex items-center px-1 py-0.5 space-x-1 text-sm font-medium rounded-md">    <div class="ytuong-icon ytuong-icon__danger">    <div class="ytuong-tooltip ytuong-tooltip__dang text-xs">      Reactions    </div>    <span class="bg-white flex items-center __PADDING_CARD__ rounded-md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="__CARD_SIZE_ICONS__ text-amber-600 hover:text-amber-700">  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.536-4.464a.75.75 0 10-1.061-1.061 3.5 3.5 0 01-4.95 0 .75.75 0 00-1.06 1.06 5 5 0 007.07 0zM9 8.5c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S7.448 7 8 7s1 .672 1 1.5zm3 1.5c.552 0 1-.672 1-1.5S12.552 7 12 7s-1 .672-1 1.5.448 1.5 1 1.5z" clip-rule="evenodd" />  </svg>  </span>  </div>    __REACTIONS__</div>',window.CARD_PIN_REPINS='<div class="text-gray-800 flex items-center px-1 py-0.5 space-x-1 text-sm font-medium rounded-md">    <div class="ytuong-icon ytuong-icon__danger">    <div class="ytuong-tooltip ytuong-tooltip__dang text-xs">      Repins    </div>    <span class="bg-white flex items-center __PADDING_CARD__ rounded-md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="__CARD_SIZE_ICONS__ text-rose-600 hover:text-rose-700">  <path fill-rule="evenodd" d="M15.621 4.379a3 3 0 00-4.242 0l-7 7a3 3 0 004.241 4.243h.001l.497-.5a.75.75 0 011.064 1.057l-.498.501-.002.002a4.5 4.5 0 01-6.364-6.364l7-7a4.5 4.5 0 016.368 6.36l-3.455 3.553A2.625 2.625 0 119.52 9.52l3.45-3.451a.75.75 0 111.061 1.06l-3.45 3.451a1.125 1.125 0 001.587 1.595l3.454-3.553a3 3 0 000-4.242z" clip-rule="evenodd" />  </svg>  </span>  </div>    __REPIN__</div>',window.CARD_PIN_SHARES='<div class="text-gray-800 flex items-center px-1 py-0.5 space-x-1 text-sm font-medium rounded-md">    <div class="ytuong-icon ytuong-icon__danger">    <div class="ytuong-tooltip ytuong-tooltip__dang text-xs">      Shares    </div>  <span class="bg-white flex items-center __PADDING_CARD__ rounded-md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="__CARD_SIZE_ICONS__">    <path d="M13 4.5a2.5 2.5 0 11.702 1.737L6.97 9.604a2.518 2.518 0 010 .792l6.733 3.367a2.5 2.5 0 11-.671 1.341l-6.733-3.367a2.5 2.5 0 110-3.475l6.733-3.366A2.52 2.52 0 0113 4.5z" />  </svg>  </span>  </div>    __SHARE__</div>',window.CARD_PIN_CREATED_AT='<div class="text-gray-800 flex items-center px-1 py-0.5 space-x-1 text-sm font-medium rounded-md">    <div class="ytuong-icon ytuong-icon__danger">    <div class="ytuong-tooltip ytuong-tooltip__dang text-xs">      Created At    </div>  <span class="bg-white flex items-center __PADDING_CARD__ rounded-md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="__CARD_SIZE_ICONS__">    <path d="M5.25 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H6a.75.75 0 01-.75-.75V12zM6 13.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V14a.75.75 0 00-.75-.75H6zM7.25 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H8a.75.75 0 01-.75-.75V12zM8 13.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V14a.75.75 0 00-.75-.75H8zM9.25 10a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H10a.75.75 0 01-.75-.75V10zM10 11.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V12a.75.75 0 00-.75-.75H10zM9.25 14a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H10a.75.75 0 01-.75-.75V14zM12 9.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V10a.75.75 0 00-.75-.75H12zM11.25 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H12a.75.75 0 01-.75-.75V12zM12 13.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V14a.75.75 0 00-.75-.75H12zM13.25 10a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H14a.75.75 0 01-.75-.75V10zM14 11.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V12a.75.75 0 00-.75-.75H14z" />    <path fill-rule="evenodd" d="M5.75 2a.75.75 0 01.75.75V4h7V2.75a.75.75 0 011.5 0V4h.25A2.75 2.75 0 0118 6.75v8.5A2.75 2.75 0 0115.25 18H4.75A2.75 2.75 0 012 15.25v-8.5A2.75 2.75 0 014.75 4H5V2.75A.75.75 0 015.75 2zm-1 5.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.5c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25H4.75z" clip-rule="evenodd" />  </svg>  </span>  </div>  <div class="ytuong-icon ytuong-icon__danger">    <div class="ytuong-tooltip ytuong-tooltip__dang text-xs">    __CREATED_L__    </div>    __CREATED__  </div>  </div>',window.CARD_PIN_DIV='<div class="absolute left-2 top-1" style="z-index: 999999999 !important;">        __CARD_PIN_TRADEMARK__      __CARD_PIN_SAVES__  __CARD_PIN_REACTIONS__    __CARD_PIN_LIKES__    __CARD_PIN_REPINS__    __CARD_PIN_COMMENTS__    __CARD_PIN_SHARES__    __CARD_PIN_CREATED_AT____DOWNLOAD_BUTTON__  </div>',window.DOWNLOAD_BUTTON='<div class="text-gray-800 flex items-center px-1 py-0.5 space-x-1 text-sm font-medium">    <div class="flex ytuong-icon ytuong-icon__danger">  <div class="ytuong-tooltip ytuong-tooltip__dang text-xs">  Bookmark  </div>  <button type="button" class=" bg-white inline-flex text-pink-700 py-0.5 px-1 rounded-md focus:outline-none" id="bookmark" data-pin-id="__PIN_ID__">  <svg xmlns="http://www.w3.org/2000/svg" fill="none" id="in-active" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="__CARD_SIZE_ICONS__">  <path stroke-linecap="round" stroke-linejoin="round" d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z" /></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"  id="active" fill="currentColor" class="__CARD_SIZE_ICONS__ hidden">  <path fill-rule="evenodd" d="M6.32 2.577a49.255 49.255 0 0 1 11.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 0 1-1.085.67L12 18.089l-7.165 3.583A.75.75 0 0 1 3.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93Z" clip-rule="evenodd" /></svg>  </button></div>    <div class="flex ytuong-icon ytuong-icon__danger __N_HIDE__">  <div class="ytuong-tooltip ytuong-tooltip__dang text-xs">  Native Pin  </div>  <div class=" bg-white inline-flex text-teal-700 py-0.5 px-1 rounded-md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="__CARD_SIZE_ICONS__">    <path fill-rule="evenodd" d="M16.403 12.652a3 3 0 000-5.304 3 3 0 00-3.75-3.751 3 3 0 00-5.305 0 3 3 0 00-3.751 3.75 3 3 0 000 5.305 3 3 0 003.75 3.751 3 3 0 005.305 0 3 3 0 003.751-3.75zm-2.546-4.46a.75.75 0 00-1.214-.883l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" />  </svg>  </div></div><div class="flex ytuong-icon ytuong-icon__danger __VIDEO_HIDE__">  <div class="ytuong-tooltip ytuong-tooltip__dang text-xs">  Download High Quality Video  </div>  <a href="__VIDEO_URL__" target="_blank" class=" bg-white inline-flex text-blue-700 hover:bg-gray-200 py-0.5 px-1 rounded-md cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="__CARD_SIZE_ICONS__"><path d="M3.25 4A2.25 2.25 0 001 6.25v7.5A2.25 2.25 0 003.25 16h7.5A2.25 2.25 0 0013 13.75v-7.5A2.25 2.25 0 0010.75 4h-7.5zM19 4.75a.75.75 0 00-1.28-.53l-3 3a.75.75 0 00-.22.53v4.5c0 .199.079.39.22.53l3 3a.75.75 0 001.28-.53V4.75z" /></svg></a></div><div class="flex ytuong-icon ytuong-icon__danger">  <div class="ytuong-tooltip ytuong-tooltip__dang text-xs">  Download High Quality Image  </div>  <a href="__IMAGE_URL__" target="_blank" class="bg-white inline-flex hover:bg-gray-200 text-pink-600 py-0.5 px-1 rounded-md cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="__CARD_SIZE_ICONS__">  <path fill-rule="evenodd" d="M1 5.25A2.25 2.25 0 013.25 3h13.5A2.25 2.25 0 0119 5.25v9.5A2.25 2.25 0 0116.75 17H3.25A2.25 2.25 0 011 14.75v-9.5zm1.5 5.81v3.69c0 .414.336.75.75.75h13.5a.75.75 0 00.75-.75v-2.69l-2.22-2.219a.75.75 0 00-1.06 0l-1.91 1.909.47.47a.75.75 0 11-1.06 1.06L6.53 8.091a.75.75 0 00-1.06 0l-2.97 2.97zM12 7a1 1 0 11-2 0 1 1 0 012 0z" clip-rule="evenodd" /></svg></div></a><div class="flex ytuong-icon ytuong-icon__danger __LINK_HIDE__">  <div class="ytuong-tooltip ytuong-tooltip__dang text-xs">  Pin Link  </div>  <a href="__LINK_URL__" target="_blank" class="bg-white inline-flex hover:bg-gray-200 text-gray-600 py-0.5 px-1 rounded-md cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="__CARD_SIZE_ICONS__">  <path d="M12.232 4.232a2.5 2.5 0 013.536 3.536l-1.225 1.224a.75.75 0 001.061 1.06l1.224-1.224a4 4 0 00-5.656-5.656l-3 3a4 4 0 00.225 5.865.75.75 0 00.977-1.138 2.5 2.5 0 01-.142-3.667l3-3z" />  <path d="M11.603 7.963a.75.75 0 00-.977 1.138 2.5 2.5 0 01.142 3.667l-3 3a2.5 2.5 0 01-3.536-3.536l1.225-1.224a.75.75 0 00-1.061-1.06l-1.224 1.224a4 4 0 105.656 5.656l3-3a4 4 0 00-.225-5.865z" /></svg>  </a></div></div>',window.BADGE_TEAL_SPAN='<span class="bg-teal-100 text-teal-800 group-hover:bg-teal-200 inline-block py-0.5 px-2 __CARD_SIZE_TEXTS__ rounded">__VALUE__</span>',window.BADGE_WHITE_SPAN='<span class="bg-white py-0.5 px-2 __CARD_SIZE_TEXTS__ rounded-md">__VALUE__</span>',window.BADGE_RED_SPAN='<span class="bg-red-100 text-red-800 group-hover:bg-red-200 inline-block py-0.5 px-2 __CARD_SIZE_TEXTS__ rounded">__VALUE__</span>',window.BADGE_GREEN_SPAN='<span class="bg-green-100 text-green-800 group-hover:bg-green-200 inline-block py-0.5 px-2 __CARD_SIZE_TEXTS__ rounded">__VALUE__</span>',window.BADGE_BLUE_SPAN='<span class="bg-blue-100 text-blue-800 group-hover:bg-blue-200 inline-block py-0.5 px-2 __CARD_SIZE_TEXTS__ rounded">__VALUE__</span>',window.BADGE_YELLOW_SPAN='<span class="bg-yellow-100 text-yellow-800 group-hover:bg-yellow-200 inline-block py-0.5 px-2 __CARD_SIZE_TEXTS__ rounded">__VALUE__</span>',window.BADGE_GRAY_SPAN='<span class="bg-gray-100 text-gray-800 group-hover:bg-gray-200 inline-block py-0.5 px-2 __CARD_SIZE_TEXTS__ rounded">__VALUE__</span>',new MutationObserver(_=>{_.forEach(e=>{e.type=="attributes"&&e.target.tagName==="IMG"&&setTimeout(v,1e3)})}).observe(document.body,{attributes:!0,childList:!1,subtree:!0}),v(),Re();async function v(){const _=await A.get(G)==null?!0:await A.get(G),e=await A.getKeys(ge),o=e[k]==null?!0:e[k],t=document.querySelectorAll('[data-test-id="pin"]');t.length>0&&t.forEach(async n=>{const r=n.getAttribute("data-test-pin-id")||"";if(!!r&&n.parentElement.querySelector(".pinterest-ytuong")===null){_&&o?n.insertAdjacentHTML("afterend",window.CARD_DIV_LOADING):n.insertAdjacentHTML("afterend",window.CARD_DIV_EMPTY);let s=null;try{s=await u("get-pin",{pinId:r},"background");const l=60*60;if(s&&(s==null?void 0:s.updatedAt)&&Date.now()-new Date(s==null?void 0:s.updatedAt)<l*1e3){const a=H(s);_&&x(n,a,e);return}}catch{}const d={options:{id:r,field_set_key:"detailed",fetch_visual_search_objects:!0},context:{}},i={source_url:window.YTUONG_PATH,data:JSON.stringify(d),_:Math.floor(Date.now())};fetch(`${window.YTUONG_ORIGIN}/resource/PinResource/get/?${ce.stringify(i)}`,{headers:{"x-app-version":window.YTUONG_APP_VERSION,"x-pinterest-appstate":"active","x-pinterest-experimenthash":window.YTUONG_EXPERIMENT_HASH,"x-pinterest-source-url":window.YTUONG_PATH,"x-pinterest-pws-handler":window.YTUONG_HANDLER_ID}}).then(l=>l.json()).then(l=>{var N;const a=(N=l==null?void 0:l.resource_response)==null?void 0:N.data,D=H({...a,is_bookmarked:s==null?void 0:s.is_bookmarked});return _&&(x(n,D,e),u("store-pin",{pinData:a},"background"),u("store-board",{board:a==null?void 0:a.board},"background"),u("store-pinner",{pinner:a==null?void 0:a.pinner},"background"),a!=null&&a.native_creator&&u("store-pinner",{pinner:a==null?void 0:a.native_creator},"background")),Promise.resolve(a)}).catch(l=>{const a={saves:0,done:0,created_at:"",reaction_counts:0,repin_count:0,comment_count:0,like_count:0,share_count:0,image_url:"",video_url:"",native:!1,url:"",is_bookmarked:s==null?void 0:s.is_bookmarked};return _&&x(n,a,e),Promise.reject(l)})}}),Se()}async function Se(){const _=fe(window.location.href);if(_){const e=await A.get(G)==null?!0:await A.get(G),o=await A.getKeys(ge),t=document.querySelector('div[data-test-id="visual-content-container"], div[data-test-id="story-pin-closeup-container"]');if(t.querySelector(".pinterest-ytuong")===null){e?t.insertAdjacentHTML("beforeend",window.CARD_DIV_LOADING):t.insertAdjacentHTML("beforeend",window.CARD_DIV_EMPTY);let n=null;try{n=await u("get-pin",{pinId:_},"background");const d=60*60;if(n&&(n==null?void 0:n.updatedAt)&&Date.now()-new Date(n==null?void 0:n.updatedAt)<d*1e3){const i=H(n);e&&x(t,i,o);return}}catch{}const r={options:{id:_,field_set_key:"detailed",fetch_visual_search_objects:!0},context:{}},s={source_url:window.YTUONG_PATH,data:JSON.stringify(r),_:Math.floor(Date.now())};fetch(`${window.YTUONG_ORIGIN}/resource/PinResource/get/?${ce.stringify(s)}`,{headers:{"x-app-version":window.YTUONG_APP_VERSION,"x-pinterest-appstate":"active","x-pinterest-experimenthash":window.YTUONG_EXPERIMENT_HASH,"x-pinterest-source-url":window.YTUONG_PATH,"x-pinterest-pws-handler":window.YTUONG_HANDLER_ID}}).then(d=>d.json()).then(d=>{var a;const i=(a=d==null?void 0:d.resource_response)==null?void 0:a.data,l=H({...i,is_bookmarked:n==null?void 0:n.is_bookmarked});e&&(x(t,l,o),u("store-pin",{pinData:i},"background"),u("store-board",{board:i==null?void 0:i.board},"background"),u("store-pinner",{pinner:i==null?void 0:i.pinner},"background"),i!=null&&i.native_creator&&u("store-pinner",{pinner:i==null?void 0:i.native_creator},"background"))}).catch(d=>{const i={saves:0,done:0,created_at:"",reaction_counts:0,repin_count:0,comment_count:0,like_count:0,share_count:0,image_url:"",video_url:"",native:!1,url:"",is_bookmarked:n==null?void 0:n.is_bookmarked};return e&&x(t,i,o),Promise.reject(d)})}}}function fe(_){const e=/\/pin\/(\d+)/;var o;return(o=e.exec(_))!==null?o[1]:!1}function I(_){return _>2e3?window.BADGE_RED_SPAN.replace("__VALUE__",M(_)):_>1e3?window.BADGE_YELLOW_SPAN.replace("__VALUE__",M(_)):_>0?window.BADGE_TEAL_SPAN.replace("__VALUE__",M(_)):window.BADGE_GRAY_SPAN.replace("__VALUE__",M(_))}function M(_){return _.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function be(_){var e=Math.floor((new Date-_)/1e3),o=e/31536e3;return o>1?window.BADGE_GRAY_SPAN.replace("__VALUE__",Math.floor(o)+" Y"):(o=e/2592e3,o>1?window.BADGE_BLUE_SPAN.replace("__VALUE__",Math.floor(o)+" M"):(o=e/86400,o>1?window.BADGE_RED_SPAN.replace("__VALUE__",Math.floor(o)+" D"):(o=e/3600,o>1?window.BADGE_YELLOW_SPAN.replace("__VALUE__",Math.floor(o)+" h"):(o=e/60,o>1?window.BADGE_YELLOW_SPAN.replace("__VALUE__",Math.floor(o)+" m"):window.BADGE_YELLOW_SPAN.replace("__VALUE__",Math.floor(e)+" s")))))}function x(_,e,o={}){var s,d,i,l,a,D,N,y;const t=_.parentElement.querySelector(".pinterest-ytuong");if(!(o[k]==null||o[k])){t.innerHTML="";return}if(o[Ae]==null||o[Ae]?t.innerHTML=window.CARD_PIN_DIV.replace("__CARD_PIN_TRADEMARK__",window.CARD_PIN_TRADEMARK):t.innerHTML=window.CARD_PIN_DIV.replace("__CARD_PIN_TRADEMARK__",'<div class="h-3"></div>'),o[ve]==null?!0:o[ve]){const c=(e==null?void 0:e.saves)||0;t.innerHTML=t.innerHTML.replace("__CARD_PIN_SAVES__",window.CARD_PIN_SAVES.replace("__SAVES__",I(c)))}else t.innerHTML=t.innerHTML.replace("__CARD_PIN_SAVES__","");if(o[Ne]==null||o[Ne]){const c=e==null?void 0:e.reaction_counts;t.innerHTML=t.innerHTML.replace("__CARD_PIN_REACTIONS__",window.CARD_PIN_REACTIONS.replace("__REACTIONS__",I(c)))}else t.innerHTML=t.innerHTML.replace("__CARD_PIN_REACTIONS__","");if(o[Ee]==null||o[Ee]){const c=(e==null?void 0:e.like_count)||0;t.innerHTML=t.innerHTML.replace("__CARD_PIN_LIKES__",window.CARD_PIN_LIKES.replace("__LIKES__",I(c)))}else t.innerHTML=t.innerHTML.replace("__CARD_PIN_LIKES__","");if(o[he]==null||o[he]){const c=(e==null?void 0:e.repin_count)||0;t.innerHTML=t.innerHTML.replace("__CARD_PIN_REPINS__",window.CARD_PIN_REPINS.replace("__REPIN__",I(c)))}else t.innerHTML=t.innerHTML.replace("__CARD_PIN_REPINS__","");if(o[me]==null||o[me]){const c=(e==null?void 0:e.comment_count)||0;t.innerHTML=t.innerHTML.replace("__CARD_PIN_COMMENTS__",window.CARD_PIN_COMMENTS.replace("__COMMENTS__",I(c)))}else t.innerHTML=t.innerHTML.replace("__CARD_PIN_COMMENTS__","");if(o[De]==null||o[De]){const c=(e==null?void 0:e.share_count)||0;t.innerHTML=t.innerHTML.replace("__CARD_PIN_SHARES__",window.CARD_PIN_SHARES.replace("__SHARE__",I(c)))}else t.innerHTML=t.innerHTML.replace("__CARD_PIN_SHARES__","");if(o[Te]==null||o[Te]){const c=be(e==null?void 0:e.created_at);t.innerHTML=t.innerHTML.replace("__CARD_PIN_CREATED_AT__",window.CARD_PIN_CREATED_AT.replace("__CREATED__",c));const E=Ve(e==null?void 0:e.created_at);t.innerHTML=t.innerHTML.replace("__CREATED_L__",E)}else t.innerHTML=t.innerHTML.replace("__CARD_PIN_CREATED_AT__","");o[Ie]==null||o[Ie]?t.innerHTML=t.innerHTML.replace("__DOWNLOAD_BUTTON__",window.DOWNLOAD_BUTTON.replace("__IMAGE_URL__",e==null?void 0:e.image_url).replace("__VIDEO_URL__",(e==null?void 0:e.story_url)||(e==null?void 0:e.video_url)).replace("__VIDEO_HIDE__",(e==null?void 0:e.story_url)||(e==null?void 0:e.video_url)?"":" hidden").replace("__N_HIDE__",e!=null&&e.native?"":" hidden").replace("__LINK_URL__",e==null?void 0:e.url).replace("__LINK_HIDE__",e!=null&&e.url?"":" hidden")):t.innerHTML=t.innerHTML.replace("__DOWNLOAD_BUTTON__","");const n=o[xe]==null?"sm":o[xe];t.innerHTML=t.innerHTML.replaceAll("__PADDING_CARD__",pe[n]||pe.sm),t.innerHTML=t.innerHTML.replaceAll("__CARD_SIZE_ICONS__",ue[n]||ue.sm),t.innerHTML=t.innerHTML.replaceAll("__CARD_SIZE_TEXTS__",we[n]||we.sm),t.innerHTML=t.innerHTML.replaceAll("__PIN_ID__",e==null?void 0:e.id);const r=t==null?void 0:t.querySelector("#bookmark");r&&(e!=null&&e.is_bookmarked?((d=(s=r==null?void 0:r.querySelector("#in-active"))==null?void 0:s.classList)==null||d.add("hidden"),(l=(i=r==null?void 0:r.querySelector("#active"))==null?void 0:i.classList)==null||l.remove("hidden")):((D=(a=r==null?void 0:r.querySelector("#in-active"))==null?void 0:a.classList)==null||D.remove("hidden"),(y=(N=r==null?void 0:r.querySelector("#active"))==null?void 0:N.classList)==null||y.add("hidden")),r==null||r.addEventListener("click",async c=>{var R,S,f,b,C,L,O,P;const E=await u("toggle-bookmark-pin",{pinId:e==null?void 0:e.id},"background"),p=document.querySelector(`button[data-pin-id="${e==null?void 0:e.id}"][id="bookmark"]`);p&&(E!=null&&E.is_bookmarked?((S=(R=p==null?void 0:p.querySelector("#in-active"))==null?void 0:R.classList)==null||S.add("hidden"),(b=(f=p==null?void 0:p.querySelector("#active"))==null?void 0:f.classList)==null||b.remove("hidden")):((L=(C=p==null?void 0:p.querySelector("#in-active"))==null?void 0:C.classList)==null||L.remove("hidden"),(P=(O=p==null?void 0:p.querySelector("#active"))==null?void 0:O.classList)==null||P.add("hidden"))),Me({particleCount:150,spread:180})}))}function V(_,e){const o="https://v1.pinimg.com/videos/";let t=_.replace(o,"").split("/");return t.pop(),t[1]="720p",t=t.join("/")+"/"+e+".mp4",{baseUrl:o,path:t,fullUrl:o+t}}function H(_){var o,t,n,r,s,d,i,l,a,D,N,y,c,E,p,R,S,f,b,C,L,O,P,Q,F,ee,_e,te,oe,ne,ae;const e={id:_==null?void 0:_.id,saves:0,done:0,created_at:"",reaction_counts:0,repin_count:0,comment_count:0,like_count:0,share_count:0,image_url:"",video_url:"",native:!1,url:"",is_bookmarked:!1};try{e.saves=((t=(o=_==null?void 0:_.aggregated_pin_data)==null?void 0:o.aggregated_stats)==null?void 0:t.saves)||0,e.done=((r=(n=_==null?void 0:_.aggregated_pin_data)==null?void 0:n.aggregated_stats)==null?void 0:r.done)||0,e.created_at=new Date(_==null?void 0:_.created_at),e.reaction_counts=Object.values((_==null?void 0:_.reaction_counts)||{}).reduce((T,g)=>T+g,0),e.repin_count=(_==null?void 0:_.repin_count)||0,e.comment_count=((s=_==null?void 0:_.aggregated_pin_data)==null?void 0:s.comment_count)||0,e.like_count=(_==null?void 0:_.like_count)||0,e.share_count=(_==null?void 0:_.share_count)||0,e.image_url=(i=(d=_==null?void 0:_.images)==null?void 0:d.orig)==null?void 0:i.url;try{let T=(l=_==null?void 0:_.videos)==null?void 0:l.video_signature;if(e.video_url=(a=_==null?void 0:_.videos)!=null&&a.video_list?(y=(N=Object.keys((D=_==null?void 0:_.videos)==null?void 0:D.video_list))==null?void 0:N.map(g=>{var h;return(h=_==null?void 0:_.videos)==null?void 0:h.video_list[g]})[0])==null?void 0:y.url:null,T&&(e==null?void 0:e.video_url)){const g=V(e==null?void 0:e.video_url,T);e.video_url=g==null?void 0:g.fullUrl}}catch{e.video_url=null}try{let T=((p=(E=(c=_==null?void 0:_.story_pin_data)==null?void 0:c.pages)==null?void 0:E[0])==null?void 0:p.video_signature)||((b=(f=(S=(R=_==null?void 0:_.story_pin_data)==null?void 0:R.pages)==null?void 0:S[0])==null?void 0:f.blocks[0])==null?void 0:b.video_signature),g=(Q=(P=(O=(L=(C=_==null?void 0:_.story_pin_data)==null?void 0:C.pages)==null?void 0:L[0])==null?void 0:O.blocks[0])==null?void 0:P.video)!=null&&Q.video_list?(ae=(ne=Object.keys((oe=(te=(_e=(ee=(F=_==null?void 0:_.story_pin_data)==null?void 0:F.pages)==null?void 0:ee[0])==null?void 0:_e.blocks[0])==null?void 0:te.video)==null?void 0:oe.video_list))==null?void 0:ne.map(h=>{var ie,re,se,de,le;return(le=(de=(se=(re=(ie=_==null?void 0:_.story_pin_data)==null?void 0:ie.pages)==null?void 0:re[0])==null?void 0:se.blocks[0])==null?void 0:de.video)==null?void 0:le.video_list[h]})[0])==null?void 0:ae.url:null;if(T&&g){const h=V(g,T);e.video_url=h==null?void 0:h.fullUrl}}catch{}e.native=_==null?void 0:_.is_native,e.url=_==null?void 0:_.link,e.is_bookmarked=_==null?void 0:_.is_bookmarked}catch{}return e}w.runtime.onMessage.addListener((_,e,o)=>{switch(_.type){case"RELOAD_PAGE":window.location.reload();break}});const Ce=60*1e3,Y=60*60*1e3;async function B(){const _=Date.now(),e=await A.get(ye);if(e&&_-parseInt(e)<Y){const o=Math.round((Y-(_-parseInt(e)))/1e3);console.log(`Skipping cleanup, next cleanup in ${o} seconds`);return}await A.set(ye,_.toString()),console.log("Running data cleanup...");try{const o=await u("CLEANUP_DATA",{},"background");console.log("Cleanup completed:",o)}catch(o){console.error("Cleanup failed:",o)}}B(),setInterval(B,Ce);const Le=(J=w.runtime?w.runtime.getManifest():{version:"N/A"})==null?void 0:J.version;He.trackEvent(Oe,{version:Le})})(chrome)});
