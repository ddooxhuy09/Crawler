var v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function h(e){if(e.__esModule)return e;var o=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(t){var _=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(o,t,_.get?_:{enumerable:!0,get:function(){return e[t]}})}),o}function y(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const d=e=>new Promise((o,t)=>{try{chrome.storage.local.get([e],function(_){o(_[e])})}catch(_){t(_)}}),c=(e,o)=>new Promise((t,_)=>{try{chrome.storage.local.set({[e]:o},function(){t()})}catch(r){_(r)}}),a=e=>new Promise((o,t)=>{try{chrome.storage.local.remove([e],function(){o()})}catch(_){t(_)}}),u=e=>new Promise((o,t)=>{try{chrome.storage.local.get(e,function(_){o(_)})}catch(_){t(_)}}),S=e=>new Promise((o,t)=>{try{chrome.storage.local.get(null,function(_){const r=Object.keys(_).filter(s=>s.startsWith(e));r.length>0?chrome.storage.local.remove(r,function(){o(r)}):o([])})}catch(_){t(_)}});var n={get:d,set:c,remove:a,getKeys:u,removeByPrefix:S};function C(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function b(e){var o=Math.floor((new Date-e)/1e3),t=o/31536e3;return t>1?Math.floor(t)+" Y":(t=o/2592e3,t>1?Math.floor(t)+" M":(t=o/86400,t>1?Math.floor(t)+" D":(t=o/3600,t>1?Math.floor(t)+" h":(t=o/60,t>1?Math.floor(t)+" m":Math.floor(o)+" s"))))}function p(e){var o=Math.floor((new Date-e)/1e3),t=o/31536e3;return t>1?Math.floor(t)+" years ago":(t=o/2592e3,t>1?Math.floor(t)+" months ago":(t=o/86400,t>1?Math.floor(t)+" days ago":(t=o/3600,t>1?Math.floor(t)+" hours ago":(t=o/60,t>1?Math.floor(t)+" minutes ago":Math.floor(o)+" seconds ago"))))}function l(e,o){const t="https://v1.pinimg.com/videos/";let _=e.replace(t,"").split("/");return _.pop(),_[1]="720p",_=_.join("/")+"/"+o+".mp4",{baseUrl:t,path:_,fullUrl:t+_}}function L(e){const o={saves:0,done:0,created_at:"",reaction_counts:0,repin_count:0,comment_count:0,like_count:0,share_count:0,image_url:"",video_url:"",native:!1};o.saves=e?.aggregated_pin_data?.aggregated_stats?.saves||0,o.done=e?.aggregated_pin_data?.aggregated_stats?.done||0,o.created_at=new Date(e?.created_at),o.reaction_counts=Object.values(e?.reaction_counts).reduce((t,_)=>t+_,0),o.repin_count=e?.repin_count||0,o.comment_count=e?.aggregated_pin_data?.comment_count||0,o.like_count=e?.like_count||0,o.share_count=e?.share_count||0,o.image_url=e?.images?.orig?.url,o.native=e?.is_native;try{let t=e?.videos?.video_signature;if(o.video_url=e?.videos?.video_list?Object.keys(e?.videos?.video_list)?.map(_=>e?.videos?.video_list[_])[0]?.url:null,t&&o?.video_url){const _=l(o?.video_url,t);o.video_url=_?.fullUrl}}catch{o.video_url=null}try{let t=e?.story_pin_data?.pages?.[0]?.video_signature||e?.story_pin_data?.pages?.[0]?.blocks[0]?.video_signature;if(o.story_url=e?.story_pin_data?.pages?.[0]?.blocks[0]?.video?.video_list?Object.keys(e?.story_pin_data?.pages?.[0]?.blocks[0]?.video?.video_list)?.map(_=>e?.story_pin_data?.pages?.[0]?.blocks[0]?.video?.video_list[_])[0]?.url:null,t&&o?.story_url){const _=l(o?.story_url,t);o.story_url=_?.fullUrl}}catch{o.story_url=null}return o}const D=e=>{let t=(e?.split("/"))[3]||null;return["homefeed","overview","business","advertiser","settings","edit","engagement","news_hub","search","pin"].includes(t)?null:/^(?![0-9_]+$)[A-Za-z0-9_]{3,30}$/.test(t)?t:null};function M(e){return delete e?.description_html,delete e?.visual_objects,delete e?.link_domain,delete e?.manual_interest_tags,delete e?.closeup_attribution,delete e?.edited_fields,delete e?.rich_summary,delete e?.rich_metadata,delete e?.unified_user_note,delete e?.tracked_link,delete e?.tracking_params,delete e?.closeup_user_note,delete e?.closeup_description,delete e?.node_id,delete e?.can_delete_did_it_and_comments,delete e?.collection_pin,delete e?.comments_disabled,delete e?.did_it_disabled,delete e?.has_required_attribution_provider,delete e?.image_medium_url,delete e?.is_eligible_for_aggregated_comments,delete e?.is_eligible_for_brand_catalog,delete e?.is_eligible_for_pdp,delete e?.is_eligible_for_related_products,delete e?.is_go_linkless,delete e?.is_hidden,delete e?.is_oos_product,delete e?.is_playable,delete e?.is_product_tagging_enabled_standard_pin,delete e?.is_stale_product,delete e?.is_unsafe_for_comments,delete e?.is_v1_idea_pin,delete e?.is_whitelisted_for_tried_it,delete e?.board?.owner,delete e?.board?.node_id,delete e?.via_pinner?.node_id,delete e?.pinner?.node_id,delete e?.native_creator?.node_id,delete e?.aggregated_pin_data?.node_id,delete e?.story_pin_data?.node_id,delete e?.story_pin_data?.metadata,delete e?.story_pin_data?.has_affiliate_products,delete e?.story_pin_data?.has_product_pins,delete e?.story_pin_data?.is_deleted,delete e?.story_pin_data?.mentioned_users,delete e?.story_pin_data?.last_edited,delete e?.story_pin_data?.pages?.[0]?.image,delete e?.story_pin_data?.pages?.[0]?.image_adjusted,e}async function H(e,o,t){const _=await n.get(e);if(_){const s=_.timestamp,i=_.value!==void 0?_.value:_.count;if(Date.now()-s<o)return i}const r=await t();return await n.set(e,{count:r,value:r,timestamp:Date.now()}),r}const w="POWER_BUTTON",B="SIDE_BAR_BUTTON",W="SIDE_BAR_IFRAME",U="SIDE_BAR_POSITION",k="SIDE_BAR_BEHAVIOR",Y="IDENTITY_ID",j="IDENTITY_EMAIL",F="PINTEREST_DATA",Z="PINTEREST_ONE_LICENCE_CODE",G="PINTEREST_ONE_ME",q="PINS_DISPLAY",V="PINS_SORT_FIELD",K="PINS_PAGE_SIZE",x="PINS_AUTO_PLAY",z="PINS_PINNERS",$="BOARDS_DISPLAY",J="BOARDS_SORT_FIELD",Q="BOARDS_PAGE_SIZE",X="PINNERS_DISPLAY",ee="PINNERS_SORT_FIELD",te="PINNERS_PAGE_SIZE",R="SORTPIN_CARD_SHOW",I="SORTPIN_CARD_SHOW_SAVES",E="SORTPIN_CARD_SHOW_REACTIONS",O="SORTPIN_CARD_SHOW_LIKES",A="SORTPIN_CARD_SHOW_REPINS",T="SORTPIN_CARD_SHOW_COMMENTS",g="SORTPIN_CARD_SHOW_SHARES",N="SORTPIN_CARD_SHOW_CREATED_AT",P="SORTPIN_CARD_SHOW_TOOLBARS",f="SORTPIN_CARD_TRADEMARK",m="SORTPIN_CARD_SIZE",oe=[R,I,E,O,A,T,g,N,P,f,m],_e="SORTPIN_SHOW_DELAY",re="SORTPIN_DELAY",se="SORTPIN_SHOW_DETAIL_PIN",ne="SMART_COLLECT_ENABLED",le="LAST_CLEANUP";export{q as A,V as B,K as C,x as D,$ as E,J as F,Q as G,X as H,Y as I,ee as J,te as K,le as L,_e as M,re as N,se as O,z as P,ne as Q,M as R,oe as S,y as T,H as U,h as V,L as W,w as a,R as b,f as c,I as d,E as e,O as f,A as g,T as h,g as i,N as j,p as k,n as l,P as m,m as n,v as o,D as p,C as q,Z as r,G as s,b as t,B as u,W as v,U as w,k as x,j as y,F as z};
